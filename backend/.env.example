# ─────────────────────────────────────────────────────────────
# DAO NFT Marketplace — Backend Environment Variables
# ─────────────────────────────────────────────────────────────
# Copy this file to .env and fill in real values.
# NEVER commit .env to git — only .env.example belongs in git.
# ─────────────────────────────────────────────────────────────

# Server
PORT=5000
NODE_ENV=development

# MongoDB Atlas Connection String
# Get from: Atlas dashboard → Connect → Drivers
MONGODB_URI=mongodb+srv://<username>:<password>@cluster0.example.mongodb.net/?appName=Cluster0

# JWT — generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=<generate-256bit-random-hex>
JWT_EXPIRE=30d

# IPFS (Pinata) — get JWT from https://app.pinata.cloud/keys
PINATA_JWT=<your-pinata-jwt>
# IPFS gateway for resolving ipfs:// URIs in backend
IPFS_GATEWAY=https://gateway.pinata.cloud/ipfs

# Blockchain RPC — your Alchemy/Infura HTTPS URL (read-only for backend)
# The backend ONLY reads from the chain. It NEVER signs transactions.
SEPOLIA_RPC=https://eth-sepolia.g.alchemy.com/v2/<your-api-key>
CHAIN_ID=11155111

# Smart Contract Addresses (set after deployment via: npx hardhat run scripts/deploy.ts --network sepolia)
CONTRACT_ADDRESS=0x...
MARKETPLACE_ADDRESS=0x...

# ─── Chain Sync Settings ───────────────────────────────────
# Number of block confirmations before an event is considered final
CONFIRMATIONS_N=3
# How many blocks to look back on restart to catch reorgs
REORG_GUARD=12
# Blocks to fetch per RPC batch (keep small for free-tier RPCs)
BACKFILL_BATCH_SIZE=10
# Max retries before a batch is permanently skipped
BACKFILL_MAX_RETRIES=3

# ─── App Limits ────────────────────────────────────────────
# Maximum items returned per page in list endpoints
MAX_PAGE_SIZE=100
# Maximum rental duration a listing can offer (days)
MAX_RENTAL_DURATION_DAYS=365
# Timeout in milliseconds for fetching IPFS/external metadata
METADATA_FETCH_TIMEOUT_MS=10000

# ─────────────────────────────────────────────────────────────
# NOTE: DEPLOYER_PRIVATE_KEY is NOT needed here.
# The backend is a read-only blockchain observer — it never signs transactions.
# Deployment scripts (hardhat) read the key from the ROOT .env, kept
# separate from this backend config.
# Architecture: Ethereum (source of truth) → Events → Backend indexes → MongoDB
# ─────────────────────────────────────────────────────────────
